# ISR (Interrupt Service Routine)

**ISR (Interrupt Service Routine)** is a crucial concept in computer systems and operating systems. It refers to a special function or routine that the operating system or hardware invokes when an interrupt occurs.

### Purpose of ISR

The purpose of an **Interrupt Service Routine (ISR)** is to manage events that occur outside the normal processing sequence of the CPU, such as:

- Handling hardware events (e.g., keyboard press, mouse movement, or data from a network).
- Managing timer events (e.g., clock ticks or delays).
- Handling errors or exceptions (e.g., a divide-by-zero operation).

### How ISRs Work

1. **Interrupt Occurrence:**
   - A device (e.g., a disk controller or network card) sends an interrupt signal to the CPU.
2. **Interrupt Acknowledgement:**
   - The CPU temporarily halts its current process and acknowledges the interrupt signal.
3. **Saving Context:**
   - Before jumping to the ISR, the CPU saves the state of its current process (like register values) so it can resume later from the same point.
4. **Executing the ISR:**
   - The CPU jumps to the ISR, which is a routine designed to handle the interrupt. For example, it may read data from an I/O device or signal that the device is ready for more work.
5. **Restoring Context:**

   - Once the ISR completes its task, the CPU restores the saved context of the interrupted process.

6. **Resuming Normal Execution:**
   - The CPU resumes the interrupted task as if nothing happened.

### Key Points about ISRs

- **Efficiency:** ISRs must be **fast** because interrupts are a critical part of the system, and spending too much time in the ISR can delay other important tasks.
- **Priority:** Some interrupts have higher priority than others. For example, hardware failure or timer interrupts are usually given higher priority over less critical events like user input.
- **Masking:** Some interrupts can be **masked** (i.e., temporarily disabled) to prevent certain interrupts from being processed during critical sections of the code.

- **Context Switching:** When an ISR is invoked, the CPU performs a **context switch**, saving and restoring the state of the program that was interrupted.

### Types of Interrupts that Trigger an ISR

1. **Hardware Interrupts:**

   - These are generated by external hardware devices. For example, when a keyboard key is pressed, or data is ready to be read from a network card.

2. **Software Interrupts:**

   - These are triggered by software programs, such as system calls or exceptions (e.g., divide-by-zero errors).

3. **Timer Interrupts:**
   - These interrupts are triggered by the system's internal clock to perform tasks at regular intervals, such as time-sharing between different running processes.

### Drawbacks of ISR â€“ Interrupt Service Routine

- Complex Debugging: ISRs are a bit difficult to debug since ISRs may be called at any time, which is again dependent on various factors and may lead to unexpected behavior.

- Limited Execution Time: ISRs should be short and efficient; more execution time may result in the system getting failed in its normal operation and giving a chance for other interrupts.

- Context Switching Overhead: ISRs introduce some overhead since the currently running processor state needs to be saved and restored upon an interrupt.

### Example 1:

I/O transfer by interrupt driven I/O
If an I/O device which wants to perform a data transfer with the processor, must give an interrupt to the processor.
An interrupt is a condition that makes the processor execute an ISR (Interrupt Service Routine).
In the ISR, the processor will perform data transfer with the I/O device.
Whenever a device wants to transfer data, it will interrupt the processor.

![ISR](https://media.geeksforgeeks.org/wp-content/uploads/20210615182535/CopyofTimingDiagramcontrolled9-660x299.png)

---

<br>
<br>


if you want to learn about context switching click [here](./Context_Switching.md)